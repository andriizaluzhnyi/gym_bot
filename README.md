# Gym Bot üèãÔ∏è1e21

Telegram –±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–ø–∏—Å–∞–º–∏ –Ω–∞ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è –∑ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—î—é Google Calendar —Ç–∞ Google Sheets.

## –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

- üìÖ **–†–æ–∑–∫–ª–∞–¥ —Ç—Ä–µ–Ω—É–≤–∞–Ω—å** ‚Äî –ø–µ—Ä–µ–≥–ª—è–¥ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Ç—Ä–µ–Ω—É–≤–∞–Ω—å
- üìù **–ó–∞–ø–∏—Å –Ω–∞ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è** ‚Äî –æ–Ω–ª–∞–π–Ω –∑–∞–ø–∏—Å –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é –≤—ñ–ª—å–Ω–∏—Ö –º—ñ—Å—Ü—å
- üîî **–ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –∑–∞ 24 –≥–æ–¥–∏–Ω–∏ —Ç–∞ 2 –≥–æ–¥–∏–Ω–∏
- üìä **Google Calendar** ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è —Ç—Ä–µ–Ω—É–≤–∞–Ω—å –∑ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º
- üìã **Google Sheets** ‚Äî –≤–µ–¥–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ –∑–∞–ø–∏—Å—ñ–≤ —Ç–∞ –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å
- üë®‚Äçüíº **–ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å** ‚Äî —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è–º–∏ –¥–ª—è —Ç—Ä–µ–Ω–µ—Ä–∞

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```bash
git clone <repository-url>
cd gym_bot
```

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∞–±–æ
venv\Scripts\activate  # Windows
```

### 3. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
pip install -e .
```

### 4. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

–°–∫–æ–ø—ñ—é–π—Ç–µ `.env.example` –≤ `.env` —Ç–∞ –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è:

```bash
cp .env.example .env
```

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `.env`:

```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=your_bot_token_here
ADMIN_USER_IDS=123456789

# Google API
GOOGLE_CREDENTIALS_FILE=credentials.json
GOOGLE_CALENDAR_ID=your_calendar@group.calendar.google.com
GOOGLE_SPREADSHEET_ID=your_spreadsheet_id
```

### 5. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Google API

#### Google Calendar & Sheets API:

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ [Google Cloud Console](https://console.cloud.google.com/)
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –ø—Ä–æ–µ–∫—Ç –∞–±–æ –æ–±–µ—Ä—ñ—Ç—å —ñ—Å–Ω—É—é—á–∏–π
3. –£–≤—ñ–º–∫–Ω—ñ—Ç—å Google Calendar API —Ç–∞ Google Sheets API
4. –°—Ç–≤–æ—Ä—ñ—Ç—å Service Account:
   - IAM & Admin ‚Üí Service Accounts ‚Üí Create
   - –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ JSON –∫–ª—é—á —è–∫ `credentials.json`
5. –ù–∞–¥–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø Service Account –¥–æ –≤–∞—à–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è —Ç–∞ —Ç–∞–±–ª–∏—Ü—ñ

### 6. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python -m src.main
```

## Docker

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
# –°—Ç–≤–æ—Ä—ñ—Ç—å .env —Ñ–∞–π–ª
cp .env.example .env
# –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ .env

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å
docker-compose up -d

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
docker-compose logs -f bot
```

## –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞

### –î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:
- `/start` ‚Äî –ü–æ—á–∞—Ç–∏ —Ä–æ–±–æ—Ç—É –∑ –±–æ—Ç–æ–º
- `/help` ‚Äî –î–æ–ø–æ–º–æ–≥–∞
- `/schedule` ‚Äî –†–æ–∑–∫–ª–∞–¥ —Ç—Ä–µ–Ω—É–≤–∞–Ω—å
- `/my` ‚Äî –ú–æ—ó –∑–∞–ø–∏—Å–∏
- `/profile` ‚Äî –ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å

### –î–ª—è –∞–¥–º—ñ–Ω—ñ–≤:
- `/admin` ‚Äî –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å
- `‚ûï –î–æ–¥–∞—Ç–∏ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è` ‚Äî –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–µ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è
- `üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞` ‚Äî –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
gym_bot/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.py      # –ö–æ–º–∞–Ω–¥–∏ /start, /help
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schedule.py   # –†–æ–∑–∫–ª–∞–¥ —Ç—Ä–µ–Ω—É–≤–∞–Ω—å
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ booking.py    # –ó–∞–ø–∏—Å/—Å–∫–∞—Å—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin.py      # –ê–¥–º—ñ–Ω —Ñ—É–Ω–∫—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ keyboards.py      # –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bot.py           # –ì–æ–ª–æ–≤–Ω–∏–π –º–æ–¥—É–ª—å –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ google_calendar.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ google_sheets.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ notifications.py
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py        # SQLAlchemy –º–æ–¥–µ–ª—ñ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repository.py    # –†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ session.py       # –°–µ—Å—ñ—ó –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ   ‚îî‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É
‚îú‚îÄ‚îÄ tests/
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ Dockerfile
‚îî‚îÄ‚îÄ pyproject.toml
```

## –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

–ë–æ—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î SQLite –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º. –°—Ç—Ä—É–∫—Ç—É—Ä–∞:

- **users** ‚Äî –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ (telegram_id, —ñ–º'—è, —Ç–µ–ª–µ—Ñ–æ–Ω)
- **trainings** ‚Äî —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è (–Ω–∞–∑–≤–∞, –¥–∞—Ç–∞, —á–∞—Å, –ª—ñ–º—ñ—Ç –º—ñ—Å—Ü—å)
- **bookings** ‚Äî –∑–∞–ø–∏—Å–∏ (–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á ‚Üî —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è)

## Google Sheets —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î —Ç—Ä–∏ –ª–∏—Å—Ç–∏:

1. **–¢—Ä–µ–Ω—É–≤–∞–Ω–Ω—è** ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö —Ç—Ä–µ–Ω—É–≤–∞–Ω—å
2. **–ó–∞–ø–∏—Å–∏** ‚Äî –∑–∞–ø–∏—Å–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
3. **–í—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–Ω—è** ‚Äî –∂—É—Ä–Ω–∞–ª –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT
